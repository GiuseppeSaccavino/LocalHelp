{% extends "base.html" %}
{% block content %}

<div style="display:flex; gap:10px; margin-bottom:20px;">
    <button id="btn_incorso" onclick="mostra('incorso')">In Progress</button>
    <button id="btn_completate" onclick="mostra('completate')">Completed</button>
    <button id="btn_nonaccettate" onclick="mostra('nonaccettate')">Not Accepted</button>
</div>

<!-- ================= NOT ACCEPTED ================= -->
<div id="nonaccettate" style="display:none;">

    <div class="cards-container">

    {% for p in attivita_non_accettate %}
        {% set p=p %}
        {% set generi_map=generi_map_non %}
        {% set mostra_aiutante=false %}
        {% set action_url="/cancella" %}
        {% set action_label="Delete" %}
        {% set action_color="danger" %}
        {% include "_card_template.html" %}
    {% endfor %}

    {% if not attivita_non_accettate %}
        <p>No pending requests.</p>
    {% endif %}

    </div>
</div>

<!-- ================= IN PROGRESS ================= -->
<div id="incorso">

    <div class="cards-container">

    {% for p in attivita_in_corso %}
        {% set p=p %}
        {% set generi_map=generi_map_in %}
        {% set mostra_aiutante=true %}
        {% set action_url="/completa" %}
        {% set action_label="Complate" %}
        {% set action_color="success" %}
        {% include "_card_template.html" %}
    {% endfor %}

    {% if not attivita_in_corso %}
        <p>No requests in progress.</p>
    {% endif %}

    </div>

</div>

<!-- ================= COMPLETED ================= -->
<div id="completate" style="display:none;">

<div class="cards-container">
{% for p in attivita_completate %}
    {% set p=p %}
    {% set generi_map=generi_map_ok %}
    {% set mostra_aiutante=true %}
    {% set footer_text="âœ” Completed" %}
    {% include "_card_template.html" %}
{% endfor %}
</div>

{% if not attivita_completate %}
    <p>No requests completed.</p>
{% endif %}

</div>

<!-- ================= JS ================= -->
<script>
function mostra(tipo) {
    const inc = document.getElementById("incorso");
    const comp = document.getElementById("completate");
    const nonacc = document.getElementById("nonaccettate");

    document.getElementById("btn_incorso").disabled = (tipo === "incorso");
    document.getElementById("btn_completate").disabled = (tipo === "completate");
    document.getElementById("btn_nonaccettate").disabled = (tipo === "nonaccettate");

    inc.style.display = (tipo === "incorso") ? "block" : "none";
    comp.style.display = (tipo === "completate") ? "block" : "none";
    nonacc.style.display = (tipo === "nonaccettate") ? "block" : "none";
}

document.addEventListener("DOMContentLoaded", () => mostra("incorso"));
</script>

{% endblock %}


